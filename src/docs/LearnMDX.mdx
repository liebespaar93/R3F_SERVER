---
title: learnMDX.mdx
description: |-
 ë‚´ìš©ì…ë ¥
date: Insert datetime string (â‡§âŒ˜I or Ctrl+Shift+I)
preview: ì´ë¯¸ì§€ ì£¼ì†Œ
draft: false
tags:
 - í…Œê·¸ì—†ìŒ
categories:
 - ì¹´í…Œê³ ë¦¬ì—†ìŒ
---

## MDX (markdown eXtensible) ë€?

XML(eXtensible Markup Language)ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ Markdowní˜•ì‹ íŒŒì¼ì´ë¼ ë³¼ ìˆ˜ ìˆë‹¤.
JSX (JavaScript XML)ì™€ ê°™ì´ ë³€í™˜í•˜ì—¬ ì£¼ë©° ê²½í—˜ìƒ yaml íŒŒì¼ë¡œë„ ë³€í™˜ê°€ëŠ¥í•œê±° ê°™ë‹¤.

## í™˜ê²½ ì„¤ì •

ì‘ì„±ìê°€ ì›í•˜ëŠ” í™˜ê²½ ì„¤ì •

- [ ] Nextjs ì—ì„œ ì„¤ì •í•  ê²ƒ
- [ ] Github styleë¡œ ì‘ì„±ë  ê²ƒ
- [ ] Codeblock ì´ PrettyLight í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë  ê²ƒ
- [ ] ì´ì ê²ƒ 

ì´ê²ƒì„ ëª©í‘œë¡œ ì‹œì‘í•´ ë³¸ë‹¤

![image](/docs/LearnMDX/learnmdx.gif)

### nexjs module í˜•ì‹ì˜ ì„¤ì •

```bash
npx create-next-app
```

ê¸°ë³¸ nextjs app routeë¡œ ìƒì„± í•˜ì˜€ë‹¤ë©´

package.jsonì´ ìƒì„±ë ê²ƒì´ë‹¤

![Image](/docs/LearnMDX/package_type.png)

ì—¬ê¸° typeì´ë¼ëŠ” ì„¤ì •ì´ ìˆëŠ”ë°\
ì„¤ëª…ì„ ë³´ë©´ ```ES modules``` ìŠ¤íƒ€ì¼ë¡œ ì‘ì„±í•  ê²ƒì´ëƒ ```commonjs```ë¡œ ì‘ì„±í•  ê²ƒì´ëƒì— ë”°ë¼ 2ê°€ì§€ ì†ì„±ì„ ë¶€ì—¬ í•  ìˆ˜ ìˆë‹¤

ê¸°ë³¸ìœ¼ë¡œëŠ” ```commonjs```ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©° mdxì˜ ê²½ìš° ```ES modules``` ë°©ì‹ë§Œ ì§€ì›í•¨ìœ¼ë¡œ ë³€ê²½ í•´ì£¼ì–´ì•¼ í•œë‹¤.

> [!CAUTION]
> ë‹¤ë¥¸ íŒŒì¼ë“¤ë„ ES modules í˜•ì‹ì— ë§ê²Œ ì„¤ì •í•´ ì£¼ì–´ì•¼ í•œë‹¤.

ìƒìœ„ ```commonjs``` & ```ES modules```  ì‘ë™ë°©ì‹ì´ ê¶ê¸ˆí•  ê²½ìš° 

>  ğŸš€ ê·¸ë¦¼ìœ¼ë¡œ ë³´ëŠ” ESM
>  [![image](https://uicdn.toast.com/toastui/img/og-image.png)](https://ui.toast.com/weekly-pick/ko_20180402)
>  ğŸ”— ë§í¬ : https://ui.toast.com/weekly-pick/ko_20180402
>
>  ğŸš€ ì¹´ì¹´ì˜¤í†¡ì´ ESMë¡œ ë°”ê¾¼ ê³¼ì •
>  [![image](https://tech.kakao.com/storage/2023/10/jsmlogo.png)](https://tech.kakao.com/2023/10/19/commonjs-esm-migration)
>  ğŸ”— ë§í¬ : https://tech.kakao.com/2023/10/19/commonjs-esm-migration

> [!WARNING]
> ```"type": "module"```ì„ ì„¤ì •í•˜ë©´í•˜ë©´<br/>
> ì •ìƒ ì ìœ¼ë¡œ ì‘ë™í•˜ë˜ ê²ƒë„ ì•ˆë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤
---
![Image](/docs/LearnMDX/error_type.png)

ì´ëŠ” tailwindì˜ ```postcss.config.js```ì˜ ```commonjs``` ë°©ì‹ êµ¬ë™ë•Œë¬¸ì— ì¶©ëŒì´ ë‚œê²ƒì´ë‹¤.\
ì´ì™€ê°™ì€ ë¬¸ì œë¥¼ í•´ê²° í•˜ê¸°ìœ„í•˜ì—¬ ```*.cjs```í˜•ì‹ì˜ íŒŒì¼ë¡œ ë³€ê²½í•´ ì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

#### ğŸª„ postcss.config.js

| ì‘ì—… | ë³€ê²½ì „ | ë³€ê²½í›„|
| :-: | :-- | :-- |
| íŒŒì¼ëª… |postcss.config.js|postcss.config.cjs|

#### ğŸª„ nexjs.config.mjs style

ğŸª„ ```commonjs``` style

```js filename="next.config.js"
const withMDX = require('@next/mdx')

/** @type {import('next').NextConfig} */
const nextConfig = {
  // Configure `pageExtensions` to include MDX files
  pageExtensions: ['js', 'jsx', 'mdx', 'ts', 'tsx'],
  // Optionally, add any other Next.js config below
};

export default withMDX(nextConfig);
```

ğŸª„ ```ES modules``` style

```mjs filename="next.config.mjs"
import nextMDX from '@next/mdx'

/** @type {import('next').NextConfig} */
const nextConfig = {
  // Configure `pageExtensions` to include MDX files
  pageExtensions: ['js', 'jsx', 'mdx', 'ts', 'tsx'],
  // Optionally, add any other Next.js config below
};

export default nextMDX(nextConfig);
```

ì´ë ‡ê²Œ ëª¨ë“  ì„¤ì •ì´ ëë‚œ í›„ì—ëŠ” ì—ëŸ¬ê°€ ì—†ì´ ì˜ ì‘ë™ ë  ê²ƒì´ë‹¤

### Github style Markdown

- [ ] Github styleë¡œ remarkê°€ ë˜ì–´ì•¼ í•œë‹¤
- [ ] Github style CSS ì½”ë“œê°€ í•„ìš”í•˜ë‹¤


#### remark github style

Nextjs doc ì— ë‚˜ì™€ìˆëŠ” MDX ì„¤ì • ë°©ë²•ì´ë‹¤ 

[![image](https://nextjs.org/api/docs-og?title=Configuring:%20MDX)](https://nextjs.org/docs/app/building-your-application/configuring/mdx)

ğŸ”— ë§í¬ : https://nextjs.org/docs/app/building-your-application/configuring/mdx

nextjs ì—ì„œëŠ” 

```mdx-components.tsx``` íŒŒì¼ë¡œ ```*.mdx``` íŒŒì¼ì˜ ìŠ¤íƒ€ì¼ì„ í•œë²ˆë” ë³€ê²½ í•´ì¤„ ìˆ˜ ìˆë‹¤

```tsx path='mdx-components.tsx'
import type { MDXComponents } from 'mdx/types'
import { ImageProps } from 'next/image'

import {createStarryNight} from '@wooorm/starry-night'


export function useMDXComponents(components: MDXComponents): MDXComponents {

  return {
    img: (props) => (
      // eslint-disable-next-line @next/next/no-img-element, jsx-a11y/alt-text
      <img
        sizes="100vw"
        style={{ width: '100%', height: 'auto', 'max-width': '740px' }}
        {...(props)}
      />
    ),
    ...components,
  }
}
```
ì´ëŸ¬í•œ ë°©ë²•ìœ¼ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ í• ìˆ˜ë„ ìˆê³  í•„ìëŠ” í”ŒëŸ¬ê·¸ ì¸ì— styleì„ ì¶”ê°€í•´ ì£¼ëŠ” ë°©ì‹ìœ¼ëŸ¬ í•˜ë ¤ê³  í•œë‹¤.


#### ğŸ next.config.mjs

```mjs filename="next.config.mjs"
import nextMDX from '@next/mdx';
import remarkGfm from 'remark-gfm';
import remarkParse from 'remark-parse';
import remarkRehype from 'remark-rehype';
import remarkStringify from 'remark-stringify';

import remarkFrontmatter from 'remark-frontmatter';
import remarkMdxFrontmatter from 'remark-mdx-frontmatter';

import rehypeStarryNight from './config/rehype-starry-night.js'
import { rehypeGithubAlerts } from 'rehype-github-alerts'

/** @type {import('next').NextConfig} */
const nextConfig = {
  // Configure `pageExtensions` to include MDX files
  pageExtensions: ['js', 'jsx', 'mdx', 'ts', 'tsx'],
  // Optionally, add any other Next.js config below
};

const withMDX = nextMDX({
  extension: /\.mdx?$/,
  // Add markdown plugins here, as desired
  options: {
    remarkPlugins: [
      remarkParse,
      remarkGfm,
      remarkRehype,
      remarkStringify,
      remarkFrontmatter,
      remarkMdxFrontmatter
    ],
    rehypePlugins: [rehypeStarryNight, rehypeGithubAlerts],
  },
})

export default withMDX(nextConfig);

```

| remarkPlugins | ì„¤ëª… |
| :-- | :-- | 
| remarkParse | remarkí• ë–¼ ë¬¶ìŒ í˜•ì‹ì„ ì§€ì›í•´ ì¤€ë‹¤ |
| remarkGfm | Github styleë¡œ í˜•ì‹ì„ ë§Œë“¤ì–´ ì¤€ë‹¤ |
| remarkRehype | ê¹ƒí—ˆë¸ŒìŠ¤íƒ€ì¼ë¡œ í˜•ì‹ì„ ë§Œë“¤ì–´ ì¤€ë‹¤ |
| remarkStringify | ê°•ì¡°í‘œì‹œë¥¼ ì§€ì›í•´ ì£¼ëŠ”ê±¸ë¡œ ì•ˆë‹¤ |
| remarkFrontmatter | ìƒìœ„ í•´ë“œì˜ ì •ë³´ë¥¼ frontmatter í˜•ì‹ìœ¼ë¡œ ê¸°ì…í•´ì¤€ë‹¤ |
| remarkMdxFrontmatter | MDXíŒŒì¼ì˜ forntmatter í˜•ì‹ì„ ì§€ì›í•´ ì¤€ë‹¤ |


| rehypePlugins | ì„¤ëª… |
| :-- | :-- |
| rehypeStarryNight | ```StarryNight```ë¥¼ í™œìš©í•´ Codeblock ì„ ê¾¸ë¯¸ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“ ê²ƒì´ë‹¤ (ìì„¸í•œ ì‚¬í•­ì€ íŒŒì¼ ```rehype-starry-night.js``` ë¥¼ ì°¸ì¡°)  | 
| | ![iamge](/docs/LearnMDX/rehype_starry_night.png) |
| rehypeGithubAlerts | Github Alert í˜•ì‹ì„ ì§€ì›í•´ ì¤€ë‹¤ | 
| | ![image](/docs/LearnMDX/rehype_github_alert.png) |


#### ğŸ rehype-starry-night.js


[![image](https://repository-images.githubusercontent.com/490836894/bb6daa71-f594-45ba-85fd-1d4185687382)](https://github.com/wooorm/starry-night)

starry nightì˜ ê²½ìš° githubì˜ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ë§Œë“œëŠ” ```PrettyLights```ì˜ projectê°€ licenses ì— ì˜í•´ ë©ˆì¶”ê³  ë§Œë“  opensource ì´ë‹¤.\
ì‚¬ìš©í•˜ê¸° í¸í•˜ë©° ìµœì‹  ESMì„ ì§€ì›í•œë‹¤ \
ë‚´ê°€ ì›í•œ remark ìŠ¤íƒ€ì¼ì´ê³  ì»¤ìŠ¤í„° ë§ˆì´ì¦ˆë„ í¸ë¦¬í•´ ì„ íƒì„ í–ˆë‹¤.


> [!NOTE]
> ì´íŒŒì¼ì€ ìƒìœ„ í”ŒëŸ¬ê·¸ì¸ì„ ìœ„í•œ ```rehypeStarryNight``` í•¨ìˆ˜ì´ë‹¤.

> [!TIP]
> í•¨ìˆ˜ì˜ ì»¤ìŠ¤í„° ë§ˆì´ì¦ˆë¡œ ```meta``` ë°ì´í„°ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œ ```filename=``` or ```path=```ë“±ì˜ ì»¤ìŠ¤í„° ë§ˆì´ì¦ˆë„ ê°€ëŠ¥í•˜ë‹¤\
> ì´ëŸ¬í•œ ì‚¬í•­ì„ ì•„ë˜ ì½”ë“œì— ì¶”ê°€í•˜ì—¬ ```props```ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤

```js filename="rehype-starry-night.js"
/**
 * @typedef {import('@wooorm/starry-night').Grammar} Grammar
 * @typedef {import('hast').ElementContent} ElementContent
 * @typedef {import('hast').Root} Root
 */

/**
 * @typedef Options
 *   Configuration (optional)
 * @property {Array<Grammar> | null | undefined} [grammars]
 *   Grammars to support (default: `common`).
 */

import {common, createStarryNight} from '@wooorm/starry-night'
import {toString} from 'hast-util-to-string'
import {visit} from 'unist-util-visit'

/**
 * Highlight code with `starry-night`.
 *
 * @param {Options | null | undefined} [options]
 *   Configuration (optional).
 * @returns
 *   Transform.
 */
export default function rehypeStarryNight(options) {
  const settings = options || {}
  const grammars = settings.grammars || common
  const starryNightPromise = createStarryNight(grammars)
  const prefix = 'language-'

  /**
   * Transform.
   *
   * @param {Root} tree
   *   Tree.
   * @returns {Promise<undefined>}
   *   Nothing.
   */
  return async function (tree) {
    const starryNight = await starryNightPromise

    visit(tree, 'element', function (node, index, parent) {
      if (!parent || index === undefined || node.tagName !== 'pre') {
        return
      }

      const head = node.children[0]

      if (!head || head.type !== 'element' || head.tagName !== 'code') {
        return
      }

      const classes = head.properties.className

      if (!Array.isArray(classes)) return

      const language = classes.find(function (d) {
        return typeof d === 'string' && d.startsWith(prefix)
      })

      if (typeof language !== 'string') return

      const scope = starryNight.flagToScope(language.slice(prefix.length))

      // Maybe warn?
      if (!scope) return

      const fragment = starryNight.highlight(toString(head), scope)
      const children = /** @type {Array<ElementContent>} */ (fragment.children)

      parent.children.splice(index, 1, {
        type: 'element',
        tagName: 'div',
        properties: {
          className: [
            'highlight',
            'highlight-' + scope.replace(/^source\./, '').replace(/\./g, '-')
          ]
        },
        children: [{type: 'element', tagName: 'pre', properties: {}, children}]
      })
    })
  }
}
```



#### Github CSS

ëª¨ë“  css ìŠ¤íƒ€ì¼ì„ ì‘ì„±í•œ íŒŒì¼ì„ ê³µê°œí•´ë‘ì—ˆë‹¤

> ğŸš€ Github Markdown CSS
> [![image](https://opengraph.githubassets.com/b9582d336f3ee0818857802266257498ddf909e6990fcbba8001d700740c5fe6/sindresorhus/github-markdown-css)](https://github.com/sindresorhus/github-markdown-css)
> ğŸ”— ë§í¬ : https://github.com/sindresorhus/github-markdown-css

ìƒìœ„ì— ìˆëŠ” cssë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ë©´ github ìŠ¤íƒ€ì¼ì´ ì™„ì„±ëœë‹¤

> [!TIP]
> css ì— ì†ì„±ì´ ì ìš© ë˜ì§€ ì•Šì€ ë³€ìˆ˜ë“¤ì´ ëª‡ê°€ì§€ ìˆë‹¤ ê·¸ê²ƒì„ ìˆ˜ì •í•´ ì£¼ê¸¸ ë°”ë€ë‹¤

ğŸ globals.css

```css filename="globals.css"
@layer base {
  :root {
    /* github css*/
    --base-size-8: 8px;
    --base-size-16: 16px;

    ...
  }
}

/* github alert css*/
.markdown-body .markdown-alert .markdown-alert-title > *:first-child {
  margin-right: var(--base-size-8)
}

```

ì½”ë“œì˜ ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„  ìƒìœ„ ```class``` ê°€ ```markdown-body``` ë¡œ ì ìš©ë˜ì–´ì•¼ í•˜ëŠ”ë°\
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” 2ê°€ì§€ê°€ ìˆë‹¤ 

ğŸª„ components style
---

ğŸ„ tree

```tree
â””â”€â”€ src
   â”œâ”€â”€ app
   |  â””â”€â”€ markdown
   |     â””â”€â”€ learnmdx
   |        â””â”€â”€ page.tsx
   â”œâ”€â”€ components
   |  â””â”€â”€ markdown
   |     â”œâ”€â”€ github-markdown.css
   |     â””â”€â”€ GithubStyleMarkdown.tsx
   â”œâ”€â”€ lib
   â””â”€â”€ markdown
      â””â”€â”€ LearnMDX.mdx   
```
> [!NOTE]
> components style ë¡œ ì‘ì„±í•˜ì—¬ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì´ë‹¤.

ğŸ GithubStyleMarkdown.tsx

```tsx filename="GithubStyleMarkdown.tsx"
import React from 'react'
import PropTypes from 'prop-types'
import "@/components/markdown/github-markdown.css";

function GithubStyleMarkdown({ children }: { children: React.ReactNode }) {

  return <div className='markdown-body'>{children}</div>
}

GithubStyleMarkdown.propTypes = {}

export default GithubStyleMarkdown
```

ğŸ /src/app/docs/learnmdx/page.tsx

```tsx filename="/src/app/docs/learnmdx/page.tsx"
import React from 'react'
import PropTypes from 'prop-types'
import LearnMarkdown from '@/docs/LearnMDX.mdx'
import GithubStyleMarkdown from '@/components/markdown/GithubStyleMarkdown'

function LearnMDXpage(props: any) {
  return (
    <GithubStyleMarkdown>
      <LearnMarkdown />
    </GithubStyleMarkdown>
  )
}

LearnMDXpage.propTypes = {}

export default LearnMDXpage
```

ğŸª„ layout style
---

ğŸ„ tree

```tree
â””â”€â”€ src
   â”œâ”€â”€ app
   |  â””â”€â”€ markdown
   |     â””â”€â”€ my-mdx-page
   |        â”œâ”€â”€ layout.tsx
   |        â””â”€â”€ page.mdx
   â”œâ”€â”€ components
   |  â””â”€â”€ markdown
   |     â””â”€â”€ github-markdown.css
   â”œâ”€â”€ lib
   â””â”€â”€ markdown
```

íŠ¸ë¦¬ êµ¬ì¡°ëŠ” ìƒìœ„ì™€ ê°™ë‹¤ layoutì„ ì´ìš©í•˜ì—¬ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— classë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ë‹¤

ğŸ src/app/docs/my-mdx-page/layout.tsx

```tsx 
import "@/components/markdown/github-markdown.css";

export default function MdxLayout({ children }: { children: React.ReactNode }) {
  // Create any shared layout or styles here
  return <div className='markdown-body'>{children}</div>
}
```

í•„ìëŠ” ì²«ë²ˆì§¸ ë°©ì‹ì´ ìµìˆ™í•˜ê³  ì¢€ë” í™œìš©ë²”ìœ„ê°€ ë†’ê¸°ì— ì²«ë²ˆì§¸ ë°©ì‹ì„ ì„ íƒí•˜ì˜€ë‹¤.

ê°œì¸ì ìœ¼ë¡œ í¸í•œê±° ì‚¬ìš©í•˜ë©´ ë ê±° ê°™ë‹¤.


Github Primer
---

> [!NOTE]
> ê¹ƒí—ˆë¸Œì˜ ì½”ë“œ ìŠ¤íƒ€ì¼ì´ ì •ë¦¬ë˜ìˆë‹¤.

í•„ìëŠ” ì´ëŸ¬í•œ Githubì˜ ì½”ë“œ ì‘ì„± ë°©ì‹ì„ ë³¼ ìˆ˜ ìˆì–´ì„œ ë§ì€ í•™ìŠµì„ í•  ìˆ˜ ìˆì—ˆë˜ê±° ê°™ë‹¤.

ë˜í•œ ë‚˜ì¤‘ì•  í•„ìš”í•œ ìŠ¤íƒ€ì¼ê¹Œì§€ ê³ ë ¤í•  ìˆ˜ ìˆê¸°ì— í•œë²ˆ ì¯¤ ë‘˜ëŸ¬ ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

> ğŸš€ Github Primer
> 
> [![image](https://repository-images.githubusercontent.com/32551735/05499880-6291-11e9-9cdf-32344e46ae8e)](https://github.com/primer)
> ğŸ”— ë§í¬ : https://github.com/primer
> 
> github ë””ìì¸ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆê²Œ ì •ë¦¬í•œ ë ˆí¬ì§€í† ë¦¬ë‹¤.

ê³ ìƒ í•˜ì˜€ë‹¤ ì´ì œ í•„ìì²˜ëŸ¼ ì´ìœ ```Github Style``` ì˜ ```Markdown```ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆì„ ê²ƒì´ë‹¤

